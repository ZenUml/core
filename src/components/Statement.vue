<template>
  <!-- Always reset the text alignment for each statement: https://github.com/ZenUml/core/issues/406 -->
  <component class="text-left"
      v-bind:is="subStatement"
      :context="context"
      :comment="comment"
      :commentObj="commentObj"
      :selfCallIndent="selfCallIndent"></component>
</template>

<script>
  import Creation from './creation/Creation.vue'
  import Interaction from './interaction/Interaction.vue'
  import InteractionAsync from './Interaction-async.vue'
  import FragmentAlt from './FragmentAlt.vue'
  import FragmentPar from './FragmentPar.vue'
  import FragmentLoop from './FragmentLoop.vue'
  import FragmentOpt from './FragmentOpt.vue'
  import FragmentTryCatchFinally from "./FragmentTryCatchFinally"
  import Return from './Return.vue'
  import Divider from './Divider.vue'
  import Comment from './Comment/Comment'

  export default {
    name: 'statement',
    props: ['context', 'selfCallIndent'],
    computed: {
      comment: function () {
        return this.context.getComment() ? this.context.getComment() : ''
      },
      commentObj: function () {
        return new Comment(this.comment)
      },
      subStatement: function () {
        let that = this
        let dict = {
          loop: 'FragmentLoop',
          alt: 'FragmentAlt',
          par: 'FragmentPar',
          opt: 'FragmentOpt',
          tcf: 'FragmentTryCatchFinally',
          creation: 'Creation',
          message: 'Interaction',
          asyncMessage: 'InteractionAsync',
          divider: 'Divider',
          ret: 'Return'
        }
        let key = Object.keys(dict).find(x => that.context[x]() !== null)
        return dict[key]
      }
    },
    components: {
      Creation,
      Interaction,
      InteractionAsync,
      FragmentAlt,
      FragmentPar,
      FragmentOpt,
      FragmentTryCatchFinally,
      FragmentLoop,
      Divider,
      Return
    }
  }
</script>
